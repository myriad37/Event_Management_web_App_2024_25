(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))};const t="http://localhost:3000/";function n(n,o){return e(this,void 0,void 0,(function*(){try{const e=yield fetch(`${t}${n}`,{headers:{Authorization:`Bearer ${o}`}});return e.ok?{success:!0,data:yield e.json()}:{success:!1,error:yield e.json()}}catch(e){return console.error("Error fetching data from API",e),{success:!1,error:{message:"An error occurred while fetching data."}}}}))}function o(n,o="auth/validate"){return r=this,i=void 0,a=function*(){const r={token:n};return yield function(n,o,r){return e(this,void 0,void 0,(function*(){try{const e=yield fetch(`${t}${n}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:o?JSON.stringify(o):void 0});return e.ok?{success:!0,data:yield e.json()}:{success:!1,error:yield e.json()}}catch(e){return console.error("Error posting data to API",e),{success:!1,error:{message:`An error occurred while connecting to the API: ${e.message||"Unknown error"}`}}}}))}(o,r)},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function o(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof c?r:new c((function(e){e(r)}))).then(n,o)}s((a=a.apply(r,i||[])).next())}));var r,i,c,a}var r=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))};const i=(e,t,n)=>{const o=document.createElement("a");return o.classList.add("block","px-4","py-2","text-sm","text-gray-700"),o.setAttribute("href",t),o.setAttribute("role","menuitem"),o.setAttribute("tabindex","-1"),o.setAttribute("id",n),o.innerText=e,o},c=()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelector("#user-menu-list");if(e)if(e.innerHTML="",yield((e="token")=>{return t=void 0,n=void 0,i=function*(){const t=localStorage[e];if(t)try{const e=yield o(t);return!0===e.success?!0===(yield e.data).valid:(console.error("Error validating token:",e.error),!1)}catch(e){return console.error("Error validating token:",e),!1}return!1},new((r=void 0)||(r=Promise))((function(e,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function a(e){try{s(i.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,a)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i})()){const t=window.location.pathname.includes("login.html"),n=window.location.pathname.includes("signup.html");let o;o=(yield a())?"/admin":"/user",(t||n)&&(window.location.href=o),e.appendChild(i("Your Dashboard",o,"user-menu-item-0")),e.appendChild(i("Logout","account/login.html","user-menu-item-2"));const r=document.querySelector("#user-menu-item-2");r&&r.addEventListener("click",(e=>{e.preventDefault(),s()}))}else document.querySelectorAll(".login-required").forEach((e=>{e.setAttribute("href","/account/login.html")})),e.appendChild(i("Sign In","/account/login.html","user-menu-item-0")),e.appendChild(i("Create Account","/account/signup.html","user-menu-item-1"))})),a=()=>r(void 0,void 0,void 0,(function*(){const e=localStorage.getItem("token"),t=yield function(e){return t=this,o=void 0,i=function*(){return yield n("user",e)},new((r=void 0)||(r=Promise))((function(e,n){function c(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,a)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i}(e);if(t.success){const e=t.data;if(e&&"admin"===e.role)return!0}return!1})),s=()=>r(void 0,void 0,void 0,(function*(){localStorage.removeItem("token"),window.location.href="/account/login.html"}));function d(e){return{isValid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e),error:"Invalid email address"}}function u(e){return{isValid:e.length>6,error:"Password must be at least 6 characters"}}const l=function(e,t){const n=[],o=d("test@example.com");n.push(o);const r=u("password123");return n.push(r),n}();console.log("Login Form Validation Results:",l);const h=function(e,t,n){const o=[],r=d("newuser@example.com");o.push(r);const i=u("securePassword123");o.push(i);const c={isValid:""!=="securePassword1234".trim(),error:"This field is required"};return o.push(c),o}();console.log("Registration Form Validation Results:",h);function m(e){const t=document.createElement("div");t.classList.add("login-required"),t.classList.add("max-w-sm","sm:min-w-[360px]","min-w-[98vw]","p-6","bg-white","border","border-gray-200","rounded-lg","shadow","dark:bg-gray-800","dark:border-gray-700");const n=document.createElement("a");e.isCanceled?(n.classList.add("bg-red-200","dark:bg-red-700"),n.href="#"):(n.href="event_detail.html?id="+e.id,n.classList.add("bg-blue-200","dark:bg-blue-700")),n.classList.add("login-required");const o=document.createElement("h5");o.classList.add("mb-2","text-2xl","font-bold","tracking-tight","text-gray-900","dark:text-white"),o.textContent=e.eventName,n.appendChild(o),t.appendChild(n);const r=f(`Date: ${function(e,t=!1){const n=new Date(e);let o;return o=t?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(n):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(n),o}(e.eventDate+"")}`,"mb-1","text-sm","text-gray-500","dark:text-gray-400","font-semibold");t.appendChild(r);const i=f("Location: "+e.location,"mb-2","text-sm","text-gray-500","dark:text-gray-400","font-semibold");t.appendChild(i);const c=f(e.description,"mb-3","font-normal","text-gray-700","dark:text-gray-400");t.appendChild(c);const a=document.createElement("a");if(a.href=`event_detail.html?id=${e.id}`,a.classList.add("login-required","inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"),a.textContent="Details",e.isCanceled)a.classList.add("bg-red-700","hover:bg-red-800","dark:bg-red-600","dark:hover:bg-red-700"),a.textContent="Canceled";else{a.classList.add("bg-blue-700","hover:bg-blue-800","dark:bg-blue-600","dark:hover:bg-blue-700");const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("rtl:rotate-180","w-3.5","h-3.5","ms-2"),e.setAttribute("aria-hidden","true"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("fill","none"),e.setAttribute("viewBox","0 0 14 10"),e.innerHTML='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>',a.appendChild(e)}return t.appendChild(a),t}function f(e,...t){const n=document.createElement("p");return n.textContent=e,n.classList.add(...t),n}document.addEventListener("DOMContentLoaded",(e=>{return t=void 0,o=void 0,i=function*(){var e;const t=document.querySelector("#eventsContainer");if(t.innerHTML='<h1 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-500 dark:text-white">Loading events...</h1>',t){const o=yield function(){return e=this,t=void 0,r=function*(){return yield n("event")},new((o=void 0)||(o=Promise))((function(n,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}));var e,t,o,r}();if(t.innerHTML="",!o||!o.success){t.innerHTML='<h1 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-500 dark:text-white">No Events found</h1>';const n=(null===(e=null==o?void 0:o.error)||void 0===e?void 0:e.message)||"No Events found";return void console.log(n)}{const e=o.data;console.log("I am at the event loop"),console.log(typeof e);for(let n of e){const e=m(n);t.appendChild(e)}}}c(),(()=>{const e=document.querySelector("#user-menu"),t=document.querySelector("#user-menu-list");e&&t&&e.addEventListener("click",(()=>{t.classList.toggle("hidden")}));const n=document.querySelector("#mobile-menu"),o=document.querySelector("#menu-toggle"),r=document.querySelector("#menu-close-btn"),i=document.querySelector("#menu-show-btn");o&&n&&r&&i&&o.addEventListener("click",(()=>{n.classList.toggle("hidden"),r.classList.toggle("hidden"),i.classList.toggle("hidden")}))})()},new((r=void 0)||(r=Promise))((function(e,n){function c(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,a)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i}))})();